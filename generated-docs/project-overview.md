Last updated: 2025-12-02

# Project Overview

## プロジェクト概要
- MML (Music Macro Language) をブラウザで手軽に扱えるようにするWrapperライブラリです。
- `mml2abc`と`abcjs`を利用し、MMLから五線譜表示と音源再生を可能にします。
- Web上でテキストベースの音楽データを視覚化・演奏する機会を広げることを目指します。

## 技術スタック
- フロントエンド:
    - `abcjs`: ブラウザで五線譜を描画し、SoundFont GM音源ソフトシンセを鳴らすためのJavaScriptライブラリです。
    - HTML: ウェブページの構造定義に使用され、このライブラリの利用デモや組込みが行われます。
    - JavaScript: クライアントサイドのスクリプト言語として、主要なロジックやUI操作の実装に使用されています。
- 音楽・オーディオ:
    - `mml2abc`: MML (Music Macro Language) 形式の音楽データをABC記譜法に変換するためのライブラリ（`easymmlabc`が内部で利用）。
    - SoundFont GM音源ソフトシンセ: `abcjs`に組み込まれており、生成された楽譜を再生する音源として機能します。
- 開発ツール:
    - GitHub Pages: プロジェクトのデモページ公開に使用されている静的サイトホスティングサービスです。
- テスト: [情報なし]
- ビルドツール: [情報なし]
- 言語機能:
    - JavaScript: このプロジェクトの主要な実装言語であり、ブラウザ上での動的な機能を提供します。
- 自動化・CI/CD: [情報なし]
- 開発標準: [情報なし]

## ファイル階層ツリー
```
📄 LICENSE
📖 README.md
📄 _config.yml
📜 easymmlabc.js
📁 generated-docs/
🌐 googled947dc864c270e07.html
🌐 index.html
📜 mmlTemplates.js
```

## ファイル詳細説明
- **LICENSE**: プロジェクトのライセンス情報が記述されたファイルです。
- **README.md**: プロジェクトの概要、目的、使い方、デモ情報などが記述された説明書です。
- **_config.yml**: GitHub Pagesのサイト設定を定義するYAMLファイルです。
- **easymmlabc.js**: MML文字列の解析、五線譜の描画、演奏を制御する主要なJavaScriptライブラリファイルです。`mml2abc`と`abcjs`をラップし、ブラウザでの利用を容易にします。
- **generated-docs/**: 自動生成されたドキュメントが格納されるディレクトリです。
- **googled947dc864c270e07.html**: Googleサイト確認用のHTMLファイルです。
- **index.html**: プロジェクトのデモページや利用例を示す主要なHTMLファイルです。MML入力、五線譜表示、演奏機能のUIを含みます。
- **mmlTemplates.js**: ドロップダウンリストで選択可能なMMLのテンプレート文字列が定義されているJavaScriptファイルです。

## 関数詳細説明
- **setupSelect()**:
    - 役割: MMLテンプレートを選択するためのドロップダウンリスト（`<select>`要素）を初期化し、テンプレートの選択肢を追加します。
    - 引数: なし
    - 戻り値: なし
    - 機能: テンプレート選択時のイベントハンドラを設定し、選択されたMMLに基づいて五線譜の表示と演奏を更新します。

- **addOptionToSelect()**:
    - 役割: ドロップダウンリストに新しいMMLテンプレートの選択肢（`<option>`要素）を追加します。
    - 引数: テンプレート名、MML文字列など
    - 戻り値: なし
    - 機能: 与えられたMMLテンプレート情報を用いて、ドロップダウンリストに表示される項目を作成し追加します。

- **removeIndent()**:
    - 役割: MML文字列から不要なインデント（空白やタブ）を除去します。
    - 引数: MML文字列
    - 戻り値: インデントが除去されたMML文字列
    - 機能: MMLテンプレートや入力されたMMLが整形されていても、適切に処理できるように前処理を行います。

- **setupKeyBind()**:
    - 役割: キーボードショートカットなどのイベントバインディングを設定します。
    - 引数: なし
    - 戻り値: なし
    - 機能: 特定のキー入力（例: Cキーでの演奏開始）に応じて、MMLの処理や演奏を開始するなどの動作をトリガーします。

- **getLastNotePos()**:
    - 役割: MML文字列中の最後の音符の位置を特定します。
    - 引数: MML文字列
    - 戻り値: 最後の音符の開始位置のインデックス
    - 機能: MMLの特定の編集や再生開始位置の決定などに利用される可能性があります。

- **findLastMatchPos()**:
    - 役割: 指定された正規表現にマッチする最後の部分の位置をMML文字列内で見つけます。
    - 引数: MML文字列、正規表現
    - 戻り値: マッチした部分の開始位置のインデックス
    - 機能: MMLの構文解析や、特定の要素の抽出、編集範囲の特定などに利用されます。

## 関数呼び出し階層ツリー
```
- setupSelect (easymmlabc.js)
  - addOptionToSelect ()
    - removeIndent ()
    - setupKeyBind ()
    - getLastNotePos ()
    - findLastMatchPos ()
    - addEventListener ()

---
Generated at: 2025-12-02 07:06:33 JST
